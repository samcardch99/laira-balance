---
import { getRelativeLocaleUrl } from "astro:i18n";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = Astro.currentLocale || "es";
const scheduleURL = `${getRelativeLocaleUrl(lang, "schedule")}#schedule_widget`;

const language = getLangFromUrl(Astro.url);
const t = useTranslations(language);
---

<a
  href={scheduleURL}
  id="reserve-button"
  class="before-div backdrop-blur-lg border-darkPink border-[0.5px] !text-primary darkPink rotate-90 lg:rotate-0 w-fit fixed translate-x-1/2 lg:translate-x-0 right-0 mr-3 lg:mr-0 top-1/2 lg:top-[20%] -translate-y-1/2 px-4 py-2 lg:rounded-l-full lg:rounded-r-none rounded-full shadow-lg text-base md:text-lg z-[100] transition-colors"
>
  {t("reserve_button")}
</a>

<div
  class="hidden pointer-events-none shadow-none before-div -z-[1] rotate-90 lg:rotate-0 w-fit fixed translate-x-1/2 lg:translate-x-0 right-0 mr-3 lg:mr-0 top-1/2 lg:top-[20%] -translate-y-1/2 px-5 py-4 lg:rounded-l-full lg:rounded-r-none rounded-full text-base md:text-lg transition-colors"
>
  {t("reserve_button")}
</div>

<style>
  .before-div {
    background: linear-gradient(
      130deg,
      #c9b3a6 0%,
      #e8d8d0 25%,
      #bfa293 50%,
      #8d6e5e 75%,
      #bfa293 100%
    );
    background-size: 400% 400%;
    animation: smoothGlow 12s cubic-bezier(0.4, 0, 0.2, 1) infinite;
    @apply backdrop-blur-xl;
  }

  /* Movimiento circular con transiciones m√°s suaves */
  @keyframes smoothGlow {
    0% {
      background-position: 0% 50%;
    }
    25% {
      background-position: 50% 100%;
    }
    50% {
      background-position: 100% 50%;
    }
    75% {
      background-position: 50% 0%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  @keyframes glowing {
    0% {
      background-position: 0% 0%;
    }
    50% {
      background-position: 400% 0%;
    }
    100% {
      background-position: 0% 0%;
    }
  }
</style>

<!-- <style>
  #reserve-button::before {
    position: fixed;
    content: "";
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, red, blue);
    background-size: 800%;
    z-index: -50;
    border-radius: 99999px;
    border-top-right-radius: 0px;
    border-bottom-right-radius: 0px;
  }
</style> -->
