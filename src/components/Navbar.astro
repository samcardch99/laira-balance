---
import Menu from "./Menu.astro";

let isOpen = false;

function toggleMenu() {
  isOpen = !isOpen;
}
---

<header
  id="navbar"
  class="primary transition-all w-full h-20 px-10 pt-4 pb-6 md:pb-4 md:pt-10 grid grid-cols-3 md:flex md:justify-between fixed z-[100] top-0 left-0 text-lg backdrop-blur-sm [mask-image:linear-gradient(to_bottom,black_90%,transparent_100%)]"
>
  <div class="w-fit gap-2 flex justify-start items-center md:hidden font-bold">
    <a href="/en"> EN </a>
    <span class="font-thin">|</span>
    <a href="/es"> ES </a>
  </div>
  <a class="self-center col-start-2 justify-self-center h-12" href="/">
    <svg
      id="Capa_2"
      data-name="Capa 2"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 95.2 102.55"
      class="h-12 w-12"
    >
      <g id="Capa_1-2" data-name="Capa 1">
        <g>
          <path
            d="M48.05,0l6.56,6.64-5.78,5.76c2.84.18,7.94,1.07,10.49,2.36s6.4,3.45,8.6,5.65c2.85,2.85,4.98,6.05,6.4,9.62,1.42,3.57,2.13,7.23,2.13,10.99,0,3.76-.71,7.42-2.13,10.99-1.42,3.57-3.55,6.77-6.4,9.62-2.84,2.84-6.05,4.98-9.62,6.4-3.57,1.42-7.22,2.12-10.95,2.09-3.73-.03-7.38-.75-10.95-2.17-3.57-1.42-6.77-3.55-9.62-6.4-2.79-2.79-4.89-5.92-6.32-9.38-1.42-3.46-2.16-7.02-2.21-10.67-.05-3.65.58-7.23,1.89-10.75,1.32-3.51,3.29-6.69,5.92-9.54L48.05,0ZM61.25,27.06c-1.9-1.9-4.06-3.34-6.47-4.33-2.41-.98-4.89-1.46-7.44-1.43-2.55.03-5.02.54-7.44,1.53-2.41.98-4.57,2.43-6.47,4.33-1.9,1.9-3.34,4.06-4.33,6.47-.98,2.41-1.48,4.87-1.48,7.39,0,2.51.49,4.98,1.48,7.39.98,2.41,2.43,4.57,4.33,6.47,1.9,1.9,4.06,3.35,6.47,4.33,2.41.98,4.87,1.48,7.39,1.48,2.51,0,4.98-.49,7.39-1.48,2.41-.99,4.57-2.43,6.47-4.33,1.9-1.9,3.35-4.06,4.33-6.47.99-2.41,1.5-4.89,1.53-7.44.04-2.55-.44-5.02-1.43-7.44-.98-2.41-2.43-4.57-4.33-6.47Z"
            style="fill: currentColor; stroke-width: 0px;"></path>
          <path
            d="M95.2,61.77l-36.67,36.58c-1.5,1.48-3.4,2.44-5.26,3.15-1.86.71-3.75,1.06-5.68,1.05-1.93-.01-3.83-.4-5.7-1.15-1.87-.76-3.77-1.63-5.25-3.13L0,61.39l7.07-7.12,36.75,36.66c1.12,1.13,2.25,1.78,3.8,1.77,1.55,0,2.66-.68,3.75-1.76l36.7-36.3,7.13,7.13Z"
            style="fill: currentColor; stroke-width: 0px;"></path>
        </g>
      </g>
    </svg>
  </a>

  <div class="flex items-center justify-end gap-8 font-bold">
    <div class="gap-2 justify-end items-center hidden">
      <a href="/en"> EN </a>
      <span class="font-thin">|</span>
      <a href="/es"> ES </a>
    </div>
    <a href="/" class="md:block hidden link-underline"> Boutique </a>
    <a href="/schedule" class="hidden md:block link-underline"> Reservas </a>
    <a href="/pricing" class="hidden md:block link-underline"> Clases </a>
    <a href="/events" class="hidden md:block link-underline"> Eventos </a>
    <a href="/contact" class="hidden md:block link-underline"> Contacto </a>

    <button class="open-menu-button md:hidden link-underline"> Men√∫ </button>
  </div>
</header>

<script is:inline>
  const menu_button = document.querySelector(".open-menu-button");
  const menu = document.getElementById("menu");
  menu_button.addEventListener("click", () => {
    menu.classList.toggle("opacity-100");
    menu.classList.toggle("pointer-events-auto");
  });
  window.addEventListener("DOMContentLoaded", () => {
    const header = document.querySelector("header");
    const sections = document.querySelectorAll("section");
    const reserveButton = document.getElementById("reserve-button");

    const colors_reserveButton = {
      hero: "light",
      about: "darkPink",
      Yoga: "darkPink",
      Barre: "darkPink",
      Ballet: "darkPink",
      memberships_1: "darkPink",
      memberships_2: "darkPink",
      classes: "light",
      footer: "light",
      events: "light",
      prices_memberships: "darkPink",
      prices_classes: "darkPink",
      prices_trial: "light",
      prices_class_pack: "darkPink",
      contact: "darkPink",
      contact_map: "darkPink",
      schedule_section: "light",
      schedule_widget: "darkPink",
      events_text: "darkPink",
      events_grid: "darkPink",
      events_interior: "darkPink",
    };

    const colors_navbar = {
      hero: "secondary",
      about: "primary",
      classes: "primary",
      Yoga: "primary",
      Barre: "primary",
      Ballet: "primary",
      events: "secondary",
      memberships_1: "primary",
      memberships_2: "primary",
      footer: "secondary",
      prices_memberships: "primary",
      prices_classes: "primary",
      prices_trial: "secondary",
      prices_class_pack: "primary",
      contact: "primary",
      contact_map: "primary",
      about_interior: "primary",
      schedule_section: "secondary",
      schedule_widget: "primary",
      events_text: "primary",
      events_grid: "primary",
      events_interior: "primary",
    };

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const id = entry.target.id;
            console.log(entry.target.id + "___sSasasa");
            header.classList.replace(
              colors_navbar[id] === "primary" ? "secondary" : "primary",
              colors_navbar[id] === "primary" ? "primary" : "secondary"
            );
            reserveButton.classList.replace(
              colors_reserveButton[id] === "darkPink" ? "light" : "darkPink",
              colors_reserveButton[id] === "darkPink" ? "darkPink" : "light"
            );
          }
        });
      },
      { threshold: 0.75 }
    );

    sections.forEach((section) => observer.observe(section));
  });
</script>
<style>
  a {
    @apply transition-all;
  }
  header.primary {
    @apply text-primary;
  }
  header.secondary {
    @apply text-secondary;
  }
  header.primary a:hover {
    @apply text-current;
  }
  header.secondary a:hover {
    @apply text-current;
  }
</style>
